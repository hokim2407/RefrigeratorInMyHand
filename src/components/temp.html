<!DOCTYPE html>
<html lang="en">
  the
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>index</title>
    <meta name="description" content="" />
    <meta name="author" content="NeiroN" />

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script src="jquery-1.9.0.min.js" type="text/javascript"></script>
    <script src="quagga.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      var lastResult = null;
      $(function(){
      Quagga.init({
      inputStream: {
      type : "LiveStream",
      constraints: {
      width: {min: 640},
      height: {min: 480},
      facingMode: "environment",
      aspectRatio: {min: 1, max: 2}
      },
      target: document.querySelector('#interactive')
      },
      locator: {
      patchSize: "medium",
      halfSample: true
      },
      numOfWorkers: 2,
      frequency: 10,
      decoder: {
      readers : [{
      format: "ean_reader",
      config: {}
      }],
      debug:{
      drawBoundingBox: true,
      showFrequency: false,
      drawScanline: true,
      showPattern: false
      }
      },
      locate: true
      }, function(err) {
      if (err) {
      console.log(err);
      return
      }
      console.log("Initialization finished. Ready to start");
      Quagga.start();
      });
      Quagga.onProcessed(function(result) {
      var drawingCtx = Quagga.canvas.ctx.overlay,
      drawingCanvas = Quagga.canvas.dom.overlay;

      if (result) {
      if (result.boxes) {
      drawingCtx.clearRect(0, 0, parseInt(drawingCanvas.getAttribute("width")), parseInt(drawingCanvas.getAttribute("height")));
      result.boxes.filter(function (box) {
      return box !== result.box;
      }).forEach(function (box) {
      Quagga.ImageDebug.drawPath(box, {x: 0, y: 1}, drawingCtx, {color: "green", lineWidth: 2});
      });
      }

      if (result.box) {
      Quagga.ImageDebug.drawPath(result.box {x: 0, y: 1}, drawingCtx, {color: "#00F", lineWidth: 2});
      }

      if (result.codeResult && result.codeResult.code) {
      Quagga.ImageDebug.drawPath(result.line, {x: 'x', y: 'y'}, drawingCtx, {color: 'red', lineWidth: 3});
      }
      }
      });

      Quagga.onDetected(function(result) {
      var code = result.codeResult.code;

      if (lastResult !== code) {
      lastResult = code;
      var $node = null, canvas = Quagga.canvas.dom.image;

      $node = $('<li><div class="thumbnail"><div class="imgWrapper"><img /></div><div class="caption"><h4 class="code"></h4></div></div></li>');
      $node.find("img").attr("src", canvas.toDataURL());
      $node.find("h4.code").html(code);
      $("#result_strip ul.thumbnails").prepend($node);
      }
      });
      });
    </script>
  </head>

  the
  <body>
    <div id="result_strip">
      <ul class="thumbnails"></ul>
      <ul class="collector"></ul>
    </div>
    <div id="interactive" class="viewport"></div>
  </body>
</html>
